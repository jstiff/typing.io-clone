var acorn = require('acorn');
var isArray = require('isarray');
var objectKeys = require('object-keys');
var forEach = require('foreach');
var util = require('util');

module.exports = function (src, opts, fn) {
    if (typeof opts === 'function') {
        fn = opts;
        opts = {};
    }
    if (src && typeof src === 'object' && src.constructor.name === 'Buffer') {
        src = src.toString();
    }
    else if (src && typeof src === 'object') {
        opts = src;
        src = opts.source;
        delete opts.source;
    }
    src = src === undefined ? opts.source : src;
    if (typeof src !== 'string') src = String(src);
    var parser = opts.parser || acorn;
    var ast = parser.parse(src, opts);

    
